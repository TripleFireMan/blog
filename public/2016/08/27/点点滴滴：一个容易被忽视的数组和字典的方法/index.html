<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>点点滴滴：一个容易被忽视的数组和字典的方法 | 火三 | 学如逆水行舟，不进则退，何况逝者如斯夫，不舍昼夜</title>

  
  <meta name="author" content="火三">
  

  
  <meta name="description" content="学如逆水行舟，不进则退，何况逝者如斯夫，不舍昼夜兮">
  

  
  
  <meta name="keywords" content="点点滴滴">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="点点滴滴：一个容易被忽视的数组和字典的方法"/>

  <meta property="og:site_name" content="火三"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="火三" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">火三</a>
    </h1>
    <p class="site-description">学如逆水行舟，不进则退，何况逝者如斯夫，不舍昼夜</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives/">归档</a></li>
      
        <li><a href="/tags/">标签</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>点点滴滴：一个容易被忽视的数组和字典的方法</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/08/27/点点滴滴：一个容易被忽视的数组和字典的方法/" rel="bookmark">
        <time class="entry-date published" datetime="2016-08-27T13:11:06.000Z">
          2016-08-27
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>今天来讨论下平时大家熟悉的数组/字典，但是容易忽略的数组/字典的valueForKeyPath方法<br>可能大家对- (id)valueForKeyPath:(NSString *)keyPath方法不是很了解。<br>其实这个方法非常的强大，举个例子:</p>
<a id="more"></a>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@&quot;name&quot;</span>, <span class="string">@&quot;w&quot;</span>, <span class="string">@&quot;aa&quot;</span>, <span class="string">@&quot;jimsa&quot;</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array valueForKeyPath:<span class="string">@&quot;uppercaseString&quot;</span>]);</span><br></pre></td></tr></table></figure>
<p>输出<br>(<br>    NAME,<br>    W,<br>    AA,<br>    JIMSA<br>)</p>
<p>相当于数组中的每个成员执行了uppercaseString方法，然后把返回的对象组成一个新数组返回。既然可以用uppercaseString方法，那么NSString的其他方法也可以，比如</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[array valueForKeyPath:<span class="string">@&quot;length&quot;</span>];</span><br></pre></td></tr></table></figure>
<p>返回每个字符串长度的组成的数组。只要你能想到的成员实例方法都可以这么用。<br>如果你觉得这个方法就这么点功能，那就错了。还是举具体的例子<br>对NSNumber数组快速计算数组求和、平均数、最大值、最小值</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[@<span class="number">1</span>, @<span class="number">2</span>, @<span class="number">3</span>, @<span class="number">4</span>, @<span class="number">10</span>];    </span><br><span class="line"><span class="built_in">NSNumber</span> *sum = [array valueForKeyPath:<span class="string">@&quot;@sum.self&quot;</span>];   </span><br><span class="line"><span class="built_in">NSNumber</span> *avg = [array valueForKeyPath:<span class="string">@&quot;@avg.self&quot;</span>]; </span><br><span class="line"><span class="built_in">NSNumber</span> *max = [array valueForKeyPath:<span class="string">@&quot;@max.self&quot;</span>];    </span><br><span class="line"><span class="built_in">NSNumber</span> *min = [array valueForKeyPath:<span class="string">@&quot;@min.self&quot;</span>];</span><br></pre></td></tr></table></figure>
<p>或者指定输出类型</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@&quot;name&quot;</span>, <span class="string">@&quot;w&quot;</span>, <span class="string">@&quot;aa&quot;</span>, <span class="string">@&quot;jimsa&quot;</span>, <span class="string">@&quot;aa&quot;</span>];    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array valueForKeyPath:<span class="string">@&quot;@distinctUnionOfObjects.self&quot;</span>]);</span><br></pre></td></tr></table></figure>
<p>打印<br>(<br>name,<br>w,<br>jimsa,<br>aa<br>)</p>
<p>对NSDictionary数组快速找出相应key对的值</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[@&#123;<span class="string">@&quot;name&quot;</span> : <span class="string">@&quot;cookeee&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;,</span><br><span class="line">                    @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jim&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">2</span>&#125;,</span><br><span class="line">                    @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jim&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;,</span><br><span class="line">                    @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jbos&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array valueForKeyPath:<span class="string">@&quot;name&quot;</span>]);</span><br></pre></td></tr></table></figure>

<p>直接得到字典中namekey对应的值组成的数组，显然比循环取值再加入到新数组中方便快捷<br>(<br>    cookeee,<br>    jim,<br>    jim,<br>    jbos<br>)</p>
<p>同样可以嵌套使用，先剔除name对应值的重复数据再取值</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[@&#123;<span class="string">@&quot;name&quot;</span> : <span class="string">@&quot;cookeee&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;,</span><br><span class="line">                   @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jim&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">2</span>&#125;,</span><br><span class="line">                   @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jim&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;,</span><br><span class="line">                   @&#123;<span class="string">@&quot;name&quot;</span>: <span class="string">@&quot;jbos&quot;</span>,<span class="string">@&quot;code&quot;</span> : @<span class="number">1</span>&#125;];   </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array valueForKeyPath:<span class="string">@&quot;@distinctUnionOfObjects.name&quot;</span>]);</span><br></pre></td></tr></table></figure>

<p>打印<br>(<br>cookeee,<br>jim,<br>jbos<br>)</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/点点滴滴/">点点滴滴</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2022 火三
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>